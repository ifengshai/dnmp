<style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }

    .track-title {
        font-size: 14px;
        font-weight: bold;
        padding: 20px 0;
    }

    .track-nav {
        display: flex;
        align-items: center;
        list-style: none;
        overflow: hidden;
    }

    .track-nav li {
        position: relative;
        width: 120px;
        height: 43px;
        line-height: 43px;
        font-size: 14px;
        text-align: center;
        border-top: 1px solid #DDDDDD;
        border-bottom: 1px solid #DDDDDD;
    }

    .track-nav li:before {
        content: '';
        display: block;
        position: absolute;
        right: 0;
        top: 0;
        z-index: 10;
        width: 20px;
        height: 32px;
        transform-origin: left top;
        transform: rotate(-25deg);
        border-right: 1px solid #DDDDDD;
    }

    .track-nav li:after {
        content: '';
        display: block;
        position: absolute;
        right: 0;
        bottom: 0;
        z-index: 10;
        width: 20px;
        height: 32px;
        transform-origin: left bottom;
        transform: rotate(25deg);
        border-right: 1px solid #DDDDDD;
    }

    .track-nav li.on {
        color: #FFFFFF;
        background-color: #33CC00;
        border-top: 1px solid #33CC00;
        border-bottom: 1px solid #33CC00;
    }

    .track-nav li.on:before {
        background-color: #33cc00;
        border-right: 1px solid #FFFFFF;
    }

    .track-nav li.on:after {
        background-color: #33cc00;
        border-right: 1px solid #FFFFFF;
    }

    .track-nav li span {
        position: relative;
        z-index: 20;
    }

    .track-infor {
        padding-left: 30px;
        box-sizing: border-box;
        overflow: hidden;
        list-style: none;
    }

    .track-infor li {
        display: flex;
        position: relative;
        padding: 13px 0;
        line-height: 30px;
        font-size: 14px;
        color: #383838;
    }

    .track-infor li span {
        margin-right: 30px;
        font-size: 14px;
        color: #383838;
    }

    .track-infor div p:last-child {
        color: #909090;
    }

    .track-infor div p:first-child {
        font-size: 16px;
        color: #383838;
    }

    .track-infor li:before {
        content: '';
        display: block;
        position: absolute;
        left: -30px;
        top: 22px;
        z-index: 10;
        border-radius: 50%;
        box-sizing: border-box;
        width: 10px;
        height: 10px;
        background-color: #999999;
    }

    .track-infor li:after {
        content: '';
        display: block;
        position: absolute;
        left: -25px;
        top: 0;
        width: 1px;
        height: 100%;
        background-color: #DDDDDD;
    }

    .track-infor li:first-child:before {
        background-color: #33cc00;
    }

    .track-infor li:first-child:after {
        top: 22px;
    }

    .track-infor li:last-child:after {
        top: -25px;
    }
</style>
<div class="panel-heading">
    {:build_heading()}
    <ul class="nav nav-tabs" style="margin-bottom: 20px;">
        <li class="active"><a href="#">订单节点</a>
        </li>
        <!-- <li><a href="{:url('checkDetail')}?id={$entity_id}&label={$label}">订单执行信息</a></li> -->
        <!-- <li><a href="{:url('logisticsDetail')}?id={$row.entity_id}">售后信息</a></li> -->
    </ul>
</div>
<p class="track-title" style="float: left;">物流信息</p>
{in name="7" value="$key_list" }
<p class="track-title" style="float: left;margin-left: 10%;color: #909090;">物流类型：<span
        style="color: #383838;font-size: 16px;">{$list[7]['shipment_type']}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;物流单号：<span
        style="color: #383838;font-size: 16px;">{$list[7]['track_number']}</span></p>
{/in}
<p style="width: 100%; overflow: hidden;"></p>
<ul class="track-nav">

    <li {if condition="(!empty($distribution_log_times))" }class="on" {/if}><span>加工中</span></li>

    {if condition="($is_shendan['check_status'] == 1)"}
    <li class="on"><span>已审单</span></li>
    {elseif condition="$is_shendan['check_status'] eq 0"/}
    <li class="on"><span>待审单</span></li>
    {else /}
    <li class="on"><span>审单拒绝</span></li>
    {/if}
    <li {if condition="(!empty($is_shendan['delivery_time']))"}class="on" {/if}><span>已出库</span></li>
    <!--    <li {in name="2" value="$key_list" } class="on" {-->
    <!--    /in}><span>已打印标签</span></li>-->
    <!--    <li {in name="3" value="$key_list" } class="on" {-->
    <!--    /in}><span>已配镜架</span></li>-->
    <!--    <?php if(in_array(4,$key_list)){ ?>-->
    <!--    <li class="on"><span>已配镜片</span></li>-->
    <!--    <?php }elseif(!in_array(6,$key_list)){ ?>-->
    <!--    <li><span>已配镜片</span></li>-->
    <!--    <?php } ?>-->

    <!--    <?php if(in_array(5,$key_list)){ ?>-->
    <!--    <li class="on"><span>已加工</span></li>-->
    <!--    <?php }elseif(!in_array(6,$key_list)){ ?>-->
    <!--    <li><span>已加工</span></li>-->
    <!--    <?php } ?>-->

    <!--    <li {in name="6" value="$key_list" } class="on" {-->
    <!--    /in}><span>已成品质检</span></li>-->
    <!--    <li {in name="7" value="$key_list" } class="on" {-->
    <!--    /in}><span>已出库</span></li>-->
    <li {in name="8" value="$key_list" } class="on" {/in}><span>物流上网</span></li>
    <li {in name="10" value="$key_list" } class="on" {/in}><span>运输途中</span></li>

    <?php if(in_array(30,$key_list)){ ?>
    <li class="on"><span>到达待取</span></li>
    <?php }elseif(in_array(35,$key_list)){ ?>
    <li class="on"><span>投递失败</span></li>
    <?php }elseif(in_array(40,$key_list)){ ?>
    <li class="on"><span>投递成功</span></li>
    <?php }elseif(in_array(50,$key_list)){ ?>
    <li class="on"><span>可能异常</span></li>
    <?php }else{ ?>
    <li><span>投递成功</span></li>
    <?php } ?>

</ul>
<ul class="track-infor">
    <?php if(in_array(30,$key_list)){ ?>
    <li>
        <span>{$list[30]['create_time']}</span>
        <div>
            <p>到达待取</p>
        </div>
    </li>
    <?php }elseif(in_array(35,$key_list)){ ?>
    <li>
        <span>{$list[35]['create_time']}</span>
        <div>
            <p>投递失败</p>
        </div>
    </li>
    <?php }elseif(in_array(40,$key_list)){ ?>
    <li>
        <span>{$list[40]['create_time']}</span>
        <div>
            <p>投递成功</p>
        </div>
    </li>
    <?php }elseif(in_array(50,$key_list)){ ?>
    <li>
        <span>{$list[50]['create_time']}</span>
        <div>
            <p>可能异常</p>
        </div>
    </li>
    <?php }else{ ?>
    <?php } ?>
    {in name="10" value="$key_list" }
    <li>
        <span>{$list[10]['create_time']} </span>
        <div>
            <p>运输途中</p>
        </div>
    </li>
    {/in}

    {in name="8" value="$key_list" }
    <li>
        <span>{$list[8]['create_time']}</span>
        <div>
            <p>物流上网</p>
        </div>
    </li>
    {/in}
    {if condition="(!empty($is_shendan['delivery_time']))"}
    <li>
        <span>{:date('Y-m-d H:i:s',$is_shendan['delivery_time'])}</span>
        <div>
            <p>已出库</p>
        </div>
    </li>
    {/if}
    {if condition="($is_shendan['check_status'] == 1)"}
    <li>
        <span>{:date('Y-m-d H:i:s',$is_shendan['check_time'])}</span>
        <div>
            <p>已审单</p>
        </div>
    </li>

    {/if}
    <!--			{in name="7" value="$key_list" }-->
    <!--			<li>-->
    <!--				<span>{$list[7]['create_time']}</span>-->
    <!--				<div>-->
    <!--					<p>已出库</p>-->
    <!--					{if condition=" $list[7]['handle_user_name'] neq null "}-->
    <!--					<p>处理人姓名：{$list[7]['handle_user_name']}</p>				-->
    <!--					{/if}-->
    <!--				</div>-->
    <!--			</li>-->
    <!--			{/in}-->
    <!--			-->
    <!--			{in name="6" value="$key_list" }-->
    <!--			<li>			-->
    <!--				<span>{$list[6]['create_time']}</span>-->
    <!--				<div>-->
    <!--					<p>已成品质检</p>-->
    <!--					{if condition=" $list[6]['handle_user_name'] neq null "}-->
    <!--					<p>处理人姓名：{$list[6]['handle_user_name']}</p>				-->
    <!--					{/if}-->
    <!--				</div>-->
    <!--			</li>-->
    <!--			{/in}-->
    <!--					-->
    <!--			-->
    <!--			<?php if(in_array(5,$key_list)){ ?>-->
    <!--			<li>-->
    <!--				<span>{$list[5]['create_time']}</span>-->
    <!--				<div>-->
    <!--					<p>已加工</p>-->
    <!--					{if condition=" $list[5]['handle_user_name'] neq null "}-->
    <!--					<p>处理人姓名：{$list[5]['handle_user_name']}</p>				-->
    <!--					{/if}-->
    <!--				</div>-->
    <!--			</li>			-->
    <!--			<?php } ?>-->
    <!--			-->
    <!--			<?php if(in_array(4,$key_list)){ ?>-->
    <!--			<li>-->
    <!--				<span>{$list[4]['create_time']}</span>-->
    <!--				<div>-->
    <!--					<p>已配镜片</p>-->
    <!--					{if condition=" $list[4]['handle_user_name'] neq null "}-->
    <!--					<p>处理人姓名：{$list[4]['handle_user_name']}</p>				-->
    <!--					{/if}-->
    <!--				</div>-->
    <!--			</li>			-->
    <!--			<?php } ?>		-->
    <!--			{in name="3" value="$key_list" }-->
    <!--			<li>-->
    <!--				<span>{$list[3]['create_time']}</span>-->
    <!--				<div>-->
    <!--					<p>已配镜架</p>-->
    <!--					{if condition=" $list[3]['handle_user_name'] neq null "}-->
    <!--					<p>处理人姓名：{$list[3]['handle_user_name']}</p>				-->
    <!--					{/if}-->
    <!--				</div>-->
    <!--			</li>-->
    <!--			{/in}-->
    <!--			-->
    <!--			{in name="2" value="$key_list" }-->
    <!--			<li>-->
    <!--				<span>{$list[2]['create_time']}</span>-->
    <!--				<div>-->
    <!--					<p>已打印标签</p>-->
    <!--					{if condition=" $list[2]['handle_user_name'] neq null "}-->
    <!--					<p>处理人姓名：{$list[2]['handle_user_name']}</p>				-->
    <!--					{/if}-->
    <!--				</div>-->
    <!--			</li>-->
    <!--			{/in}-->
    <!--			-->


    {if condition="(!empty($distribution_log))"}
    <li>
        <span id="showmessage" style="cursor:pointer">订单加工详情(点击展开)</span>
        <div style="float: left;margin-top: 20px;overflow-y:auto;display: none" id="winuiconsole">
            {volist name="distribution_log" id="vo"}
            <p>sku:{$new_order_item_process_id2[$key]}</p>
            {volist name="vo" id="vv"}
            <div>
                <p>{$vv.remark} {:date('Y-m-d H:i:s', $vv.create_time)} 处理人：{$vv.create_person}</p>
            </div>
            {/volist}
            {/volist}
        </div>
    </li>
    {/if}

    {if condition="(!empty($distribution_log_times))"}
    <li>
        <span>{:date('Y-m-d H:i:s',$distribution_log_times[0])}</span>
        <div>
            <p>已打印标签</p>
        </div>
    </li>
    {/if}

    {in name="1" value="$key_list" }
    <li>
        <span>{$list[1]['create_time']}</span>
        <div>
            <p>已支付</p>
            {if condition=" $list[1]['handle_user_name'] neq null "}
            <p>处理人姓名：{$list[1]['handle_user_name']}</p>
            {/if}
        </div>
    </li>
    {/in}


    {in name="0" value="$key_list" }
    <li>
        <span>{$list[0]['create_time']}</span>
        <div>
            <p>已提交订单</p>
            {if condition=" $list[0]['handle_user_name'] neq null "}
            <p>处理人姓名：{$list[0]['handle_user_name']}</p>
            {/if}
        </div>
    </li>
    {/in}
</ul>
<script>
    function my(id){
        return document.getElementById(id);
    }
    var trageet =  document.getElementById("winuiconsole");
    my("showmessage").onclick = function (){
        if (trageet.style.display =="none"){
            my("winuiconsole").style.display ="block"
        }else{
            my("winuiconsole").style.display ="none"
        }
    }
</script>
